<html>
<body>
Обнаружена <a href="https://www.c2.com/cgi/wiki?DoubleBraceInitialization">инициализация с двойными фигурными скобками</a>.
<p>Инициализация с двойными фигурными скобками работает медленнее, чем обычная инициализация, поскольку требует загрузки дополнительного класса.</p>
<p>Может привести к ошибкам при сравнении методом <code>equals()</code>, если метод <code>equals()</code> не принимает подклассы в качестве параметров.</p>
<p>Использование инициализации с двойными фигурными скобками в нестатическом контексте может вызвать утечку памяти. Это происходит из-за того, что создаётся анонимный класс, который при компиляции с помощью javac версий до Java 18 сохраняет ссылку на окружающий объект.</p>
<p>Кроме того, в версиях Java до 9 инициализация с двойными фигурными скобками несовместима с оператором Diamond, поскольку он не работает с анонимными классами.
</p>
<p><b>Пример:</b></p>
<pre><code>
  List&lt;Integer&gt; list = new ArrayList&lt;&gt;() {{
    add(1);
    add(2);
  }};
</code></pre>
<p>После применения быстрого исправления:</p>
<pre><code>
  List&lt;Integer&gt; list = new ArrayList&lt;&gt;();
  list.add(1);
  list.add(2);
</code></pre>
</body>
</html>
