<html>
<body>
Сообщает об использовании устаревшего DSL <code>kotlinOptions</code> в скриптах сборки Gradle <code>.kts</code>.
<p>
    DSL <code>kotlinOptions</code> считается устаревшим в Kotlin 2.0.
    Эта проверка помогает перейти с <code>kotlinOptions</code> на <code>compilerOptions</code>.
    Она также изменяет несколько <a href="https://kotl.in/types-for-kgp-compiler-options">параметров, использующих новые типы</a> вместо типа <code>String</code>.
</p>
<p>
    Пример для задачи <code>KotlinCompile</code>:
</p>
<pre><code>
val compileKotlin: KotlinCompile by tasks
compileKotlin.kotlinOptions {
    jvmTarget = "1.8"
    freeCompilerArgs = listOf("-module-name", "my_module_name")
    apiVersion = "1.9"
}
</code></pre>
<p>Проверка также добавляет импорт для параметров с измененными типами:</p>
<pre><code>
import org.jetbrains.kotlin.gradle.dsl.JvmTarget
import org.jetbrains.kotlin.gradle.dsl.KotlinVersion
...
val compileKotlin: KotlinCompile by tasks
compileKotlin.compilerOptions {
    jvmTarget.set(JvmTarget.JVM_1_8)
    freeCompilerArgs.set(listOf("-module-name", "my_module_name"))
    apiVersion.set(KotlinVersion.KOTLIN_1_9)
}
</code></pre>
<p>
    Пример для задачи <code>Kotlin2JsCompile</code>:
</p>
<pre><code>
val compileKotlin: Kotlin2JsCompile by tasks
compileKotlin.kotlinOptions {
    moduleKind = "commonjs"
    sourceMapEmbedSources = "inlining"
    sourceMapNamesPolicy = "fully-qualified-names"
    main = "noCall"
}
</code></pre>
<p>После применения проверки:</p>
<pre><code>
import org.jetbrains.kotlin.gradle.dsl.JsMainFunctionExecutionMode
import org.jetbrains.kotlin.gradle.dsl.JsModuleKind
import org.jetbrains.kotlin.gradle.dsl.JsSourceMapEmbedMode
import org.jetbrains.kotlin.gradle.dsl.JsSourceMapNamesPolicy
...
val compileKotlin: Kotlin2JsCompile by tasks
compileKotlin.compilerOptions {
    moduleKind.set(JsModuleKind.MODULE_COMMONJS)
    sourceMapEmbedSources.set(JsSourceMapEmbedMode.SOURCE_MAP_SOURCE_CONTENT_INLINING)
    sourceMapNamesPolicy.set(JsSourceMapNamesPolicy.SOURCE_MAP_NAMES_POLICY_FQ_NAMES)
    main.set(JsMainFunctionExecutionMode.NO_CALL)
}
</code></pre>
