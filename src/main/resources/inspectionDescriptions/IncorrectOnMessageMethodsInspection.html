<html>
<body>
<p>Сообщение о некорректном использовании аннотации <code>@OnMessage</code> в методах WebSocket.</p>
<p>
  Эта аннотация помечает метод для обработки входящих WebSocket сообщений. Каждая конечная точка WebSocket может содержать только один метод обработки сообщений для всех форматов WebSocket (текстовых, бинарных, pong). Метод с аннотацией <code>@OnMessage</code> может иметь следующие параметры в любом порядке:
</p>
<ul>
  <li>
    Может содержать один из следующих наборов параметров:
    <ul>
      <li>
        Если метод обрабатывает текстовые сообщения:
        <ul>
          <li><code>String</code> для получения всего сообщения</li>
          <li>Java примитивный тип или его классовый эквивалент для получения всего сообщения, преобразованного в этот тип</li>
          <li>Пара <code>String</code> и boolean для получения сообщения по частям</li>
          <li><code>Reader</code> для получения всего сообщения в виде блокирующего потока</li>
          <li>Любой объектный параметр, для которого конечная точка имеет текстовый декодер (<code>Decoder.Text</code> или <code>Decoder.TextStream</code>)
          </li>
        </ul>
      </li>
      <li>
        Если метод обрабатывает бинарные сообщения:
        <ul>
          <li><code>byte[]</code> или <code>ByteBuffer</code> для получения всего сообщения</li>
          <li>Пара <code>byte[]</code> и boolean, или пара <code>ByteBuffer</code> и boolean для получения сообщения по частям</li>
          <li><code>InputStream</code> для получения всего сообщения в виде блокирующего потока</li>
          <li>Любой объектный параметр, для которого конечная точка имеет бинарный декодер (<code>Decoder.Binary</code> или <code>Decoder.BinaryStream</code>)
          </li>
        </ul>
      </li>
      <li>
        Если метод обрабатывает pong сообщения:
        <ul>
          <li><code>PongMessage</code> для обработки pong сообщений</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Любое количество параметров типа <code>String</code> или Java примитивов серверной конечной точки с аннотацией <code>@PathParam</code></li>
  <li>Один опциональный параметр <code>Session</code></li>
</ul>
<p>
  Если метод возвращает значение, среда выполнения WebSocket интерпретирует его как сообщение для отправки партнеру.
  Допустимые типы возвращаемых значений: <code>String</code>, <code>ByteBuffer</code>, <code>byte[]</code>, любые Java примитивы или их классовые эквиваленты, а также любые типы с кодировщиком. Если метод возвращает Java примитив, реализация должна создать текстовое сообщение, используя стандартное строковое представление Java примитива, если только разработчик не предоставил кодировщик для этого типа в данной конечной точке - в этом случае должен использоваться этот кодировщик. Если метод возвращает классовый эквивалент Java примитива, реализация должна создать текстовое сообщение из классового эквивалента примитива, как описано выше.
</p>
</body>
</html>
