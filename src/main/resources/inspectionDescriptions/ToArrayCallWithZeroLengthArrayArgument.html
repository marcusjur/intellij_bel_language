<html>
<body>
Сообщает о вызовах <code>Collection.toArray()</code>, не соответствующих предпочтительному стилю, и предлагает применить рекомендуемый стиль.
<p>Существует два способа преобразования коллекции в массив:</p>
<ul>
  <li>С предварительно заданным размером массива, например <code>c.toArray(new String[c.size()])</code></li>
  <li>С пустым массивом, например <code>c.toArray(new String[0])</code></li>
</ul>
<p>В старых версиях Java рекомендовалось использовать массив с предварительно заданным размером, так как рефлексивный вызов для создания массива нужного размера был очень медленным.</p>
<p>Однако, начиная с последних обновлений OpenJDK 6, этот вызов был оптимизован, и теперь версия с пустым массивом работает так же быстро, а иногда даже быстрее версии с предварительно заданным размером. Более того, передача массива с предварительно заданным размером может быть опасной для конкурентных или синхронизованных коллекций из-за возможной гонки данных между вызовами <code>size</code> и <code>toArray</code>. Если коллекция уменьшается параллельно во время выполнения операции, это может привести к появлению дополнительных значений <code>null</code> в конце массива.</p>
<p>Предпочтительный стиль можно выбрать с помощью параметров проверки.</p>
</body>
</html>
